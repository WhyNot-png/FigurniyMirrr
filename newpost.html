{% extends "app/layout.html" %}

{% block content %}
<div class="new-post-container">
    <h1>📝 Добавить новую статью</h1>

    {% if not user.is_superuser %}
    <div class="alert alert-danger">
        <h4>🚫 Доступ запрещен</h4>
        <p>Только администраторы могут добавлять новые статьи.</p>
    </div>
    {% else %}

    <form method="POST" enctype="multipart/form-data" class="blog-form">
        {% csrf_token %}

        <div class="form-section">
            <h3>Основная информация</h3>

            <div class="form-group">
                <label class="form-label required-field">{{ form.title.label }}</label>
                {{ form.title }}
                {% if form.title.errors %}
                <div class="error-message">{{ form.title.errors }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label class="form-label required-field">{{ form.description.label }}</label>
                {{ form.description }}
                {% if form.description.errors %}
                <div class="error-message">{{ form.description.errors }}</div>
                {% endif %}
            </div>
        </div>

        <div class="form-section">
            <h3>Медиа-контент</h3>

            <div class="form-group">
                <label class="form-label">{{ form.image.label }}</label>
                {{ form.image }}
                <div class="help-text">Рекомендуемый размер: 800x400px</div>
                {% if form.image.errors %}
                <div class="error-message">{{ form.image.errors }}</div>
                {% endif %}
            </div>
        </div>

        <div class="form-section">
            <h3>Содержание статьи</h3>

            <div class="form-group">
                <label class="form-label required-field">{{ form.content.label }}</label>
                {{ form.content }}
                {% if form.content.errors %}
                <div class="error-message">{{ form.content.errors }}</div>
                {% endif %}
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-success btn-lg">
                📤 Опубликовать статью
            </button>
            <a href="/" class="btn btn-secondary">Отмена</a>
        </div>
    </form>
    {% endif %}
</div>

<style>
    .new-post-container {
        max-width: 800px;
        margin: 0 auto;
    }

    .blog-form {
        background: white;
        padding: 2rem;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .form-section {
        margin-bottom: 2rem;
        padding-bottom: 1.5rem;
        border-bottom: 1px solid #ecf0f1;
    }

        .form-section h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #3498db;
        }

    .form-actions {
        text-align: center;
        margin-top: 2rem;
        padding-top: 1.5rem;
        border-top: 2px solid #ecf0f1;
    }

    .btn-lg {
        padding: 0.8rem 2rem;
        font-size: 1.1rem;
    }

    .required-field::after {
        content: " *";
        color: #e74c3c;
    }

    .help-text {
        font-size: 0.9rem;
        color: #7f8c8d;
        margin-top: 0.5rem;
    }
</style>
{% endblock %}